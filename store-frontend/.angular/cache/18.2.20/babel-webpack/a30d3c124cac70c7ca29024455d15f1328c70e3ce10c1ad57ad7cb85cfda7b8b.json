{"ast":null,"code":"import { FormsModule } from '@angular/forms';\nimport { CommonModule } from '@angular/common';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"../../services/user.service\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"@angular/forms\";\nconst _c0 = [\"file\"];\nfunction SignupComponent_div_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\")(1, \"div\", 17);\n    i0.ɵɵelement(2, \"img\", 29);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"src\", ctx_r1.userImage(ctx_r1.id), i0.ɵɵsanitizeUrl);\n  }\n}\nfunction SignupComponent_div_9_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\")(1, \"div\", 17);\n    i0.ɵɵelement(2, \"img\", 29);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"src\", ctx_r1.anonymousImage(), i0.ɵɵsanitizeUrl);\n  }\n}\nexport let SignupComponent = /*#__PURE__*/(() => {\n  class SignupComponent {\n    constructor(router, userService) {\n      this.router = router;\n      this.userService = userService;\n      this.id = 0;\n      this.user = {\n        username: '',\n        name: '',\n        email: '',\n        password: '',\n        passwordConfirmation: '',\n        rol: 'USER',\n        code: '',\n        street: '',\n        number: 0,\n        zipCode: 0,\n        city: ''\n      };\n    }\n    ngOnInit() {\n      if (this.userService.isLogged() && this.userService.isUser()) this.id = this.userService.getCurrentUser().id;\n    }\n    home() {\n      this.router.navigate(['/home']);\n    }\n    userImage(id) {\n      return '/store/api/users/' + id + '/image';\n    }\n    anonymousImage() {\n      return '/store/api/users/6/image';\n    }\n    register() {\n      this.userService.addUser(this.user).subscribe(user => {\n        console.log(user);\n        this.uploadImage(user);\n      }, _ => alert('failed to register'));\n    }\n    uploadImage(user) {\n      const image = this.file.nativeElement.files[0];\n      if (image) {\n        let formData = new FormData();\n        formData.append(\"imageFile\", image);\n        this.userService.setUserImage(user, formData).subscribe(_ => {\n          alert('registered successfully');\n        }, _ => alert('error uploading user image'));\n      }\n    }\n    static {\n      this.ɵfac = function SignupComponent_Factory(__ngFactoryType__) {\n        return new (__ngFactoryType__ || SignupComponent)(i0.ɵɵdirectiveInject(i1.Router), i0.ɵɵdirectiveInject(i2.UserService));\n      };\n    }\n    static {\n      this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n        type: SignupComponent,\n        selectors: [[\"app-signup\"]],\n        viewQuery: function SignupComponent_Query(rf, ctx) {\n          if (rf & 1) {\n            i0.ɵɵviewQuery(_c0, 5);\n          }\n          if (rf & 2) {\n            let _t;\n            i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.file = _t.first);\n          }\n        },\n        standalone: true,\n        features: [i0.ɵɵStandaloneFeature],\n        decls: 40,\n        vars: 11,\n        consts: [[\"file\", \"\"], [1, \"navbar\"], [\"id\", \"mySidenav\", 1, \"nav-menu\", \"--nav-dark-light\"], [1, \"is-hidden-mobile\", \"brand\", \"is-uppercase\", \"has-text-weight-bold\", \"has-text-dark\", 3, \"click\"], [1, \"nav-menu-ul\"], [1, \"banner\", \"banner-second\"], [1, \"banner-container\"], [4, \"ngIf\"], [1, \"container\"], [1, \"columns\"], [1, \"column\"], [1, \"is-size-4\"], [\"type\", \"text\", \"placeholder\", \"User name\", \"required\", \"\", 1, \"form-control-field\", 3, \"ngModelChange\", \"ngModel\"], [\"type\", \"text\", \"placeholder\", \"Name\", \"required\", \"\", 1, \"form-control-field\", 3, \"ngModelChange\", \"ngModel\"], [\"type\", \"email\", \"placeholder\", \"Email\", \"required\", \"\", 1, \"form-control-field\", 3, \"ngModelChange\", \"ngModel\"], [\"type\", \"password\", \"placeholder\", \"Password\", \"minlength\", \"5\", \"maxlength\", \"10\", \"required\", \"\", 1, \"form-control-field\", 3, \"ngModelChange\", \"ngModel\"], [\"type\", \"password\", \"placeholder\", \"Confirm your password\", \"minlength\", \"5\", \"maxlength\", \"10\", \"required\", \"\", 1, \"form-control-field\", 3, \"ngModelChange\", \"ngModel\"], [1, \"user-img\"], [\"type\", \"file\", \"name\", \"imageFile\", \"accept\", \".jpg, .jpeg\", \"required\", \"\"], [\"type\", \"text\", \"placeholder\", \"Street\", \"required\", \"\", 1, \"form-control-field\", 3, \"ngModelChange\", \"ngModel\"], [\"type\", \"number\", \"placeholder\", \"Number\", \"required\", \"\", 1, \"form-control-field\", 3, \"ngModelChange\", \"ngModel\"], [\"type\", \"number\", \"placeholder\", \"00000\", \"minlength\", \"5\", \"maxlength\", \"5\", \"required\", \"\", 1, \"form-control-field\", 3, \"ngModelChange\", \"ngModel\"], [\"type\", \"text\", \"placeholder\", \"City\", \"required\", \"\", 1, \"form-control-field\", 3, \"ngModelChange\", \"ngModel\"], [1, \"btn\", \"btn-default\", \"btn-primary\", 3, \"click\"], [\"id\", \"spinner-div\", 1, \"pt-5\"], [\"role\", \"status\", 1, \"spinner-border\", \"text-primary\"], [1, \"footer\"], [1, \"footer-bar-top\"], [1, \"footer-bar-top-links\"], [\"alt\", \"\", \"width\", \"200\", \"height\", \"200\", 3, \"src\"]],\n        template: function SignupComponent_Template(rf, ctx) {\n          if (rf & 1) {\n            const _r1 = i0.ɵɵgetCurrentView();\n            i0.ɵɵelementStart(0, \"header\")(1, \"nav\", 1)(2, \"nav\", 2)(3, \"button\", 3);\n            i0.ɵɵlistener(\"click\", function SignupComponent_Template_button_click_3_listener() {\n              i0.ɵɵrestoreView(_r1);\n              return i0.ɵɵresetView(ctx.home());\n            });\n            i0.ɵɵtext(4, \"Avenue Fashion\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelement(5, \"ul\", 4);\n            i0.ɵɵelementEnd()()();\n            i0.ɵɵelementStart(6, \"div\", 5)(7, \"div\", 6);\n            i0.ɵɵtemplate(8, SignupComponent_div_8_Template, 3, 1, \"div\", 7)(9, SignupComponent_div_9_Template, 3, 1, \"div\", 7);\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(10, \"div\", 8)(11, \"div\", 9)(12, \"div\", 10)(13, \"h2\", 11);\n            i0.ɵɵtext(14, \"Registration\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(15, \"input\", 12);\n            i0.ɵɵtwoWayListener(\"ngModelChange\", function SignupComponent_Template_input_ngModelChange_15_listener($event) {\n              i0.ɵɵrestoreView(_r1);\n              i0.ɵɵtwoWayBindingSet(ctx.user.username, $event) || (ctx.user.username = $event);\n              return i0.ɵɵresetView($event);\n            });\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(16, \"input\", 13);\n            i0.ɵɵtwoWayListener(\"ngModelChange\", function SignupComponent_Template_input_ngModelChange_16_listener($event) {\n              i0.ɵɵrestoreView(_r1);\n              i0.ɵɵtwoWayBindingSet(ctx.user.name, $event) || (ctx.user.name = $event);\n              return i0.ɵɵresetView($event);\n            });\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(17, \"input\", 14);\n            i0.ɵɵtwoWayListener(\"ngModelChange\", function SignupComponent_Template_input_ngModelChange_17_listener($event) {\n              i0.ɵɵrestoreView(_r1);\n              i0.ɵɵtwoWayBindingSet(ctx.user.email, $event) || (ctx.user.email = $event);\n              return i0.ɵɵresetView($event);\n            });\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(18, \"input\", 15);\n            i0.ɵɵtwoWayListener(\"ngModelChange\", function SignupComponent_Template_input_ngModelChange_18_listener($event) {\n              i0.ɵɵrestoreView(_r1);\n              i0.ɵɵtwoWayBindingSet(ctx.user.password, $event) || (ctx.user.password = $event);\n              return i0.ɵɵresetView($event);\n            });\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(19, \"input\", 16);\n            i0.ɵɵtwoWayListener(\"ngModelChange\", function SignupComponent_Template_input_ngModelChange_19_listener($event) {\n              i0.ɵɵrestoreView(_r1);\n              i0.ɵɵtwoWayBindingSet(ctx.user.passwordConfirmation, $event) || (ctx.user.passwordConfirmation = $event);\n              return i0.ɵɵresetView($event);\n            });\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(20, \"div\", 17);\n            i0.ɵɵelement(21, \"input\", 18, 0);\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(23, \"h2\", 11);\n            i0.ɵɵtext(24, \"Address\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(25, \"div\", 9)(26, \"div\", 10)(27, \"input\", 19);\n            i0.ɵɵtwoWayListener(\"ngModelChange\", function SignupComponent_Template_input_ngModelChange_27_listener($event) {\n              i0.ɵɵrestoreView(_r1);\n              i0.ɵɵtwoWayBindingSet(ctx.user.street, $event) || (ctx.user.street = $event);\n              return i0.ɵɵresetView($event);\n            });\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(28, \"input\", 20);\n            i0.ɵɵtwoWayListener(\"ngModelChange\", function SignupComponent_Template_input_ngModelChange_28_listener($event) {\n              i0.ɵɵrestoreView(_r1);\n              i0.ɵɵtwoWayBindingSet(ctx.user.number, $event) || (ctx.user.number = $event);\n              return i0.ɵɵresetView($event);\n            });\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(29, \"div\", 10)(30, \"input\", 21);\n            i0.ɵɵtwoWayListener(\"ngModelChange\", function SignupComponent_Template_input_ngModelChange_30_listener($event) {\n              i0.ɵɵrestoreView(_r1);\n              i0.ɵɵtwoWayBindingSet(ctx.user.zipCode, $event) || (ctx.user.zipCode = $event);\n              return i0.ɵɵresetView($event);\n            });\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(31, \"input\", 22);\n            i0.ɵɵtwoWayListener(\"ngModelChange\", function SignupComponent_Template_input_ngModelChange_31_listener($event) {\n              i0.ɵɵrestoreView(_r1);\n              i0.ɵɵtwoWayBindingSet(ctx.user.city, $event) || (ctx.user.city = $event);\n              return i0.ɵɵresetView($event);\n            });\n            i0.ɵɵelementEnd()()();\n            i0.ɵɵelementStart(32, \"button\", 23);\n            i0.ɵɵlistener(\"click\", function SignupComponent_Template_button_click_32_listener() {\n              i0.ɵɵrestoreView(_r1);\n              return i0.ɵɵresetView(ctx.register());\n            });\n            i0.ɵɵtext(33, \"Create account\");\n            i0.ɵɵelementEnd()()()();\n            i0.ɵɵelementStart(34, \"div\", 24);\n            i0.ɵɵelement(35, \"div\", 25);\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(36, \"footer\", 26)(37, \"div\", 27)(38, \"li\", 28);\n            i0.ɵɵtext(39, \"2024 Avenue Fashion\");\n            i0.ɵɵelementEnd()()();\n          }\n          if (rf & 2) {\n            i0.ɵɵadvance(8);\n            i0.ɵɵproperty(\"ngIf\", ctx.userService.isLogged());\n            i0.ɵɵadvance();\n            i0.ɵɵproperty(\"ngIf\", !ctx.userService.isLogged());\n            i0.ɵɵadvance(6);\n            i0.ɵɵtwoWayProperty(\"ngModel\", ctx.user.username);\n            i0.ɵɵadvance();\n            i0.ɵɵtwoWayProperty(\"ngModel\", ctx.user.name);\n            i0.ɵɵadvance();\n            i0.ɵɵtwoWayProperty(\"ngModel\", ctx.user.email);\n            i0.ɵɵadvance();\n            i0.ɵɵtwoWayProperty(\"ngModel\", ctx.user.password);\n            i0.ɵɵadvance();\n            i0.ɵɵtwoWayProperty(\"ngModel\", ctx.user.passwordConfirmation);\n            i0.ɵɵadvance(8);\n            i0.ɵɵtwoWayProperty(\"ngModel\", ctx.user.street);\n            i0.ɵɵadvance();\n            i0.ɵɵtwoWayProperty(\"ngModel\", ctx.user.number);\n            i0.ɵɵadvance(2);\n            i0.ɵɵtwoWayProperty(\"ngModel\", ctx.user.zipCode);\n            i0.ɵɵadvance();\n            i0.ɵɵtwoWayProperty(\"ngModel\", ctx.user.city);\n          }\n        },\n        dependencies: [CommonModule, i3.NgIf, FormsModule, i4.DefaultValueAccessor, i4.NumberValueAccessor, i4.NgControlStatus, i4.RequiredValidator, i4.MinLengthValidator, i4.MaxLengthValidator, i4.NgModel]\n      });\n    }\n  }\n  return SignupComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}